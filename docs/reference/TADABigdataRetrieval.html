<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function does multiple synchronous data calls to the WQP
(waterqualitydata.us). It uses the WQP summary service to limit the amount
downloaded to only relevant data, and pulls back data from 100 stations at a
time and then joins the data back together and produces a single TADA
compatible dataframe as the output. For large data sets, that can save a lot
of time and ultimately reduce the complexity of subsequent data processing.
Using this function, you will be able to download all data available from all
sites in the contiguous United States that is available for the time period,
characteristicName, and siteType requested. Computer memory may limit the
size of datasets that your R console will be able to hold in one session.
Function requires a characteristicName, siteType, statecode, huc, or start/
end date input. The recommendation is to be as specific as you can with your
large data call. The function allows the user to run autoclean on the dataset,
but this is not the default as checking large dataframes for exact duplicate
rows can be time consuming and is better performed on its own once the query is
completed."><title>Large WQP data pulls using dataRetrieval — TADABigdataRetrieval • TADA</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Large WQP data pulls using dataRetrieval — TADABigdataRetrieval"><meta property="og:description" content="This function does multiple synchronous data calls to the WQP
(waterqualitydata.us). It uses the WQP summary service to limit the amount
downloaded to only relevant data, and pulls back data from 100 stations at a
time and then joins the data back together and produces a single TADA
compatible dataframe as the output. For large data sets, that can save a lot
of time and ultimately reduce the complexity of subsequent data processing.
Using this function, you will be able to download all data available from all
sites in the contiguous United States that is available for the time period,
characteristicName, and siteType requested. Computer memory may limit the
size of datasets that your R console will be able to hold in one session.
Function requires a characteristicName, siteType, statecode, huc, or start/
end date input. The recommendation is to be as specific as you can with your
large data call. The function allows the user to run autoclean on the dataset,
but this is not the default as checking large dataframes for exact duplicate
rows can be time consuming and is better performed on its own once the query is
completed."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">TADA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/CONTRIBUTING.html">Contributing</a>
    <a class="dropdown-item" href="../articles/WQPDataHarmonization.html">WQP Data Harmonization</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/USEPA/TADA/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Large WQP data pulls using dataRetrieval</h1>
      <small class="dont-index">Source: <a href="https://github.com/USEPA/TADA/blob/HEAD/R/DataDiscoveryRetrieval.R" class="external-link"><code>R/DataDiscoveryRetrieval.R</code></a></small>
      <div class="d-none name"><code>TADABigdataRetrieval.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function does multiple synchronous data calls to the WQP
(waterqualitydata.us). It uses the WQP summary service to limit the amount
downloaded to only relevant data, and pulls back data from 100 stations at a
time and then joins the data back together and produces a single TADA
compatible dataframe as the output. For large data sets, that can save a lot
of time and ultimately reduce the complexity of subsequent data processing.
Using this function, you will be able to download all data available from all
sites in the contiguous United States that is available for the time period,
characteristicName, and siteType requested. Computer memory may limit the
size of datasets that your R console will be able to hold in one session.
Function requires a characteristicName, siteType, statecode, huc, or start/
end date input. The recommendation is to be as specific as you can with your
large data call. The function allows the user to run autoclean on the dataset,
but this is not the default as checking large dataframes for exact duplicate
rows can be time consuming and is better performed on its own once the query is
completed.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">TADABigdataRetrieval</span><span class="op">(</span></span>
<span>  startDate <span class="op">=</span> <span class="st">"null"</span>,</span>
<span>  endDate <span class="op">=</span> <span class="st">"null"</span>,</span>
<span>  statecode <span class="op">=</span> <span class="st">"null"</span>,</span>
<span>  characteristicName <span class="op">=</span> <span class="st">"null"</span>,</span>
<span>  characteristicType <span class="op">=</span> <span class="st">"null"</span>,</span>
<span>  sampleMedia <span class="op">=</span> <span class="st">"Water"</span>,</span>
<span>  siteType <span class="op">=</span> <span class="st">"null"</span>,</span>
<span>  huc <span class="op">=</span> <span class="st">"null"</span>,</span>
<span>  maxsitesquery <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  applyautoclean <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>startDate</dt>
<dd><p>Start Date YYYY-MM-DD format, for example, "1995-01-01"</p></dd>


<dt>endDate</dt>
<dd><p>end date in YYYY-MM-DD format, for example, "2020-12-31"</p></dd>


<dt>statecode</dt>
<dd><p>Character/character vector. State/territory abbreviations from FIPS codes consist of two letters</p></dd>


<dt>characteristicName</dt>
<dd><p>Name of water quality parameter.</p></dd>


<dt>characteristicType</dt>
<dd><p>Groups of environmental measurements/parameters.</p></dd>


<dt>sampleMedia</dt>
<dd><p>Defaults to "Water". Refer to WQP domain tables for other options.</p></dd>


<dt>siteType</dt>
<dd><p>Name of water body type (e.g., "Stream", "Lake, Reservoir, Impoundment")</p></dd>


<dt>huc</dt>
<dd><p>A numeric code denoting a hydrologic unit. Example: "04030202". Different size hucs can be entered.</p></dd>


<dt>maxsitesquery</dt>
<dd><p>Numeric. The maximum number of sites to query in each for-loop of the TADABigdataRetrieval function. This input is flexible because sites are often variable in their data richness. If several data rich sites are within the same download chunk, time outs and errors are more likely. Thus, the smaller the maxsitesquery (especially with very large datacalls), the lower the probability of overwhelming the WQP.</p></dd>


<dt>applyautoclean</dt>
<dd><p>Defaults to FALSE. If TRUE, runs TADA's autoclean function on final combined dataset.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>TADA-compatible dataframe</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Some code for this function was adapted from this USGS Blog (Author: Aliesha Krall)
<a href="https://waterdata.usgs.gov/blog/large_sample_pull/" class="external-link">Large Sample Pull</a></p>
<p>See ?autoclean documentation for more information on this optional input.</p>
<p>Note: TADABigdataRetrieval (by leveraging dataRetrieval),  automatically converts
the date times to UTC. It also automatically converts the data to dates,
datetimes, numerics based on a standard algorithm. See: ?dataRetrieval::readWQPdata</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">tada1</span> <span class="op">&lt;-</span> <span class="fu">TADABigdataRetrieval</span><span class="op">(</span>startDate <span class="op">=</span> <span class="st">"2019-01-01"</span>, endDate <span class="op">=</span> <span class="st">"2021-12-31"</span>, characteristicName <span class="op">=</span> <span class="st">"Temperature, water"</span>, statecode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AK"</span>,<span class="st">"AL"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tada2</span> <span class="op">&lt;-</span> <span class="fu">TADABigdataRetrieval</span><span class="op">(</span>startDate <span class="op">=</span> <span class="st">"2016-10-01"</span>,endDate <span class="op">=</span> <span class="st">"2022-09-30"</span>, statecode <span class="op">=</span> <span class="st">"UT"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tada3</span> <span class="op">=</span> <span class="fu">TADABigdataRetrieval</span><span class="op">(</span>huc <span class="op">=</span> <span class="st">"04030202"</span>, characteristicName <span class="op">=</span> <span class="st">"Escherichia coli"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tada4</span> <span class="op">=</span> <span class="fu">TADABigdataRetrieval</span><span class="op">(</span>huc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"04030202"</span>,<span class="st">"04030201"</span><span class="op">)</span>, characteristicName <span class="op">=</span> <span class="st">"Temperature, water"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Cristina Mullin, Michelle Thawley, Jacob Greif, Laura Shumway, Elise Hinman, Kathleen Healy.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

